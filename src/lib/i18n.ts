export type SupportedLocale = "en" | "ar";

type TranslationValue = string | Record<string, TranslationValue>;

type TranslationRecord = Record<string, TranslationValue>;

export const translations: Record<SupportedLocale, TranslationRecord> = {
  en: {
    common: {
      buttons: {
        save: "Save",
        cancel: "Cancel",
        create: "Create",
        update: "Update",
        delete: "Delete",
        send: "Send",
      },
      status: {
        present: "Present",
        absent: "Absent",
        paused: "Paused",
        active: "Active",
        expiring: "Expiring",
        expired: "Expired",
        inactive: "Inactive",
      },
    },
    nav: {
      dashboard: "Dashboard",
      dailyMenu: "Daily Menu",
      checkIn: "Check-in",
      customers: "Customers",
      subscriptions: "Subscriptions",
      messages: "Messages",
      reports: "Reports",
      settings: "Settings",
      logout: "Logout",
      userFallback: "User",
      roleFallback: "Role",
    },
    topbar: {
      searchPlaceholder: "Search customers, orders...",
      quickCheckIn: "Quick Check-in",
      arabicLabel: "العربية",
      englishLabel: "English",
    },
    dashboard: {
      title: "Dashboard",
      subtitle: "Welcome back! Here's what's happening today.",
      statsActiveTitle: "Active Subscribers",
      statsActiveSubtitle: "{count} expiring soon",
      statsCheckinsTitle: "Today's Check-ins",
      statsCheckinsSubtitleLoading: "Loading...",
      statsCheckinsSubtitleMeals: "{count} meals served",
      statsExpiringTitle: "Expiring Soon",
      statsExpiringSubtitle: "Within 3 days",
      statsPickupTitle: "Pickup Rate",
      statsPickupSubtitle: "Today",
      lastUpdatedNone: "No menu set",
      lastUpdatedRecent: "Updated just now",
      activityTitle: "{name} picked up",
      activityDescription: "{count} meal(s) • {status}",
      alertTitle: "{name} plan ending soon",
      alertDescription: "{days} day(s) left on {plan}",
      alertActionRenew: "Renew",
      unknownCustomer: "Customer",
    },
    quickActions: {
      title: "Quick Actions",
      checkinName: "Check-in Customer",
      checkinDesc: "Record meal pickup",
      menuName: "Today's Menu",
      menuDesc: "Build & publish menu",
      messageName: "Send Message",
      messageDesc: "WhatsApp broadcast",
      newCustomerName: "New Customer",
      newCustomerDesc: "Register customer",
      newSubName: "New Subscription",
      newSubDesc: "Create subscription",
      reportName: "Daily Report",
      reportDesc: "View today's summary",
    },
    todayMenu: {
      title: "Today's Menu",
      editMenu: "Edit Menu",
      loading: "Loading menu...",
      empty: "No items set for today.",
      readyCount: "Ready for {count} subscribers",
      readyCountOne: "Ready for 1 subscriber",
      readyCountChecking: "Checking subscribers...",
      sendToCustomers: "Send to Customers",
    },
    recentActivity: {
      title: "Recent Activity",
      loading: "Loading activity...",
      empty: "No activity yet today.",
    },
    alerts: {
      title: "Attention Required",
      loading: "Checking alerts...",
      empty: "No alerts right now.",
    },
    login: {
      appName: "Nourish Hub",
      subtitle: "Sign in to access your dashboard",
      username: "Username",
      password: "Password",
      usernamePlaceholder: "Enter your username",
      passwordPlaceholder: "Enter your password",
      signIn: "Sign In",
      signingIn: "Signing in...",
      demoCredentials: "Demo Credentials:",
      adminCred: "Admin: admin / admin123",
      staffCred: "Staff: staff / staff123",
      invalid: "Invalid username or password",
      failed: "Login failed. Please try again.",
      welcomeAdmin: "Welcome back, Admin!",
      welcomeStaff: "Welcome back, Staff!",
    },
    subscriptionsAssign: {
      pageTitle: "Assign Subscription",
      pageSubtitle: "Choose a plan, then attach customer details and start date.",
      createPlan: "Create Plan",
      loading: "Loading subscriptions...",
      planMeta: "{days} days • {meals} meals/day",
      planInactive: "Inactive plan",
      planSelected: "Selected",
      customerSectionTitle: "Customer & Attachments",
      findCustomer: "Find Customer",
      searchPlaceholder: "Search by name or phone",
      noCustomers: "No customers found",
      startDate: "Start Date",
      paymentAmount: "Payment Amount",
      paymentAmountPlaceholder: "Defaults to plan price",
      paymentMethod: "Payment Method",
      paymentDetails: "Details (optional)",
      paymentDetailsPlaceholder: "Notes, contract reference, etc.",
      receiptLabel: "Attach receipt/contract image",
      summaryPlanSelected: "Plan selected",
      summaryPlanMissing: "Select a plan",
      summaryCustomerSelected: "Customer selected",
      summaryCustomerMissing: "Choose a customer",
      assignButton: "Assign Subscription",
      assigningButton: "Assigning...",
      dialogTitle: "Create Subscription Plan",
      dialogDescription: "Admins can add new plans for assignment.",
      nameLabel: "Name *",
      descriptionLabel: "Description",
      priceLabel: "Price *",
      durationLabel: "Duration (days) *",
      mealsPerDayLabel: "Meals / day",
      featuresLabel: "Features (optional)",
      dialogCancel: "Cancel",
      dialogSubmit: "Create Plan",
      dialogSubmitting: "Creating...",
    },
    menuPage: {
      title: "Daily Menu",
      sendToCustomers: "Send to Customers",
      schedule: "Schedule",
      templateLabel: "Template",
      chooseTemplate: "Choose a template",
      apply: "Apply",
      clear: "Clear",
      saveAsTemplate: "Save as Template",
      saveTemplateTitle: "Save current menu",
      saveTemplateDesc: "Create a reusable template from the items in today's menu.",
      templateName: "Template name",
      templateNotes: "Notes (optional)",
      lastUsed: "Last used {date}",
      itemsCount: "{count} items",
      loading: "Loading menu...",
      empty: "No items set for today.",
      addMealsHint: "Add meals from the catalog or apply a template",
      addCustomItem: "Add Item",
      searchPlaceholder: "Search by name or Arabic name",
      categoryAll: "All",
      readyFor: "Ready for {count} items",
      catalogTitle: "Food Catalog",
      createItem: "Create item",
      nameEn: "Name (English)",
      nameAr: "Name (Arabic)",
      calories: "Calories",
      protein: "Protein",
      category: "Category",
      addToCatalog: "Add to catalog",
      noItems: "No items found",
      applyTemplateHint: "Apply a template, then tweak items without affecting the saved template.",
      wideView: "Wide view",
      optimizedFor: "Optimized for 30-40 dishes",
      totalCalories: "cal total",
    },
    customersPage: {
      title: "Customers",
      subtitle: "Manage your customer database",
      addCustomer: "Add Customer",
      statsTotal: "Total Customers",
      statsActive: "Active",
      statsExpiring: "Expiring Soon",
      statsExpired: "Expired",
      searchPlaceholder: "Search by name, email, or phone...",
      filtersAll: "All",
      tableCustomer: "Customer",
      tableContact: "Contact",
      tablePlan: "Plan",
      tableDaysLeft: "Days Left",
      tablePickups: "Pickups",
      tableStatus: "Status",
      actionEdit: "Edit",
      actionSubscribe: "Subscribe",
      actionMessage: "Send Message",
      actionDelete: "Delete",
      noCustomers: "No customers found",
      loadingCustomers: "Loading customers...",
      createTitle: "Add New Customer",
      createDesc: "Create a new customer profile. They'll be able to subscribe to meal plans.",
      editTitle: "Edit Customer",
      editDesc: "Update customer information.",
      subscribeTitle: "Subscribe Customer",
      subscribeDesc: "Assign a subscription plan to {name}",
      nameLabel: "Name *",
      emailLabel: "Email *",
      phoneLabel: "Phone",
      addressLabel: "Address",
      planLabel: "Plan *",
      paymentMethod: "Payment Method",
      paymentAmount: "Payment Amount",
      paymentDetails: "Payment Details",
      receiptImage: "Receipt Image URL",
      createButton: "Create Customer",
      updateButton: "Update Customer",
      subscribeButton: "Subscribe Customer",
      cancel: "Cancel",
    },
    checkinPage: {
      title: "Customer Check-in",
      subtitle: "Record meal pickups quickly and efficiently",
      searchPlaceholder: "Search by name, phone, or scan QR code...",
      scan: "Scan",
      activeCustomers: "Active Customers ({count})",
      noCustomers: "No customers found",
      noCustomerSelected: "No customer selected",
      searchOrScan: "Search or scan to select a customer",
      checkin: "Check-in",
      mealsToPick: "Meals to Pick Up",
      ofAllowed: "of {count} allowed",
      expiringWarning: "Subscription Expiring",
      daysRemaining: "Only {days} days remaining",
      confirmCheckin: "Confirm Check-in",
      todaysCheckins: "Today's Check-ins ({count})",
      noCheckins: "No check-ins yet today",
      calendarTitle: "Check-ins for {name}",
      calendarHint: "Click a day to cycle status; edits auto-save.",
      calendarLegendSaving: "Auto-saved",
      calendarLegendSavingNow: "Saving…",
      calendarWeekday: ["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],
      calendarStatus: {
        present: "Present",
        absent: "Absent",
        paused: "Paused",
      },
      calendarMeals: "meals",
      editDialogTitle: "Edit Check-in",
      mealsPicked: "Meals Picked Up",
      attendanceStatus: "Attendance Status",
      notes: "Notes",
      updateCheckin: "Update Check-in",
    },
    messagesPage: {
      title: "WhatsApp Messages",
      subtitle: "Send broadcasts and manage message campaigns",
      tabCompose: "Compose",
      tabHistory: "History",
      tabTemplates: "Templates",
      newBroadcast: "New Broadcast",
      targetAudience: "Target Audience",
      messageTemplate: "Message Template",
      customPlaceholder: "Select a template or write custom",
      messageContent: "Message Content",
      variablesHint: "Available variables: {{name}}, {{days_remaining}}, {{plan}}, {{menu}}",
      preview: "Preview",
      sendToCount: "Send to {count} Customers",
      messagePreview: "Message Preview",
      selectedAudience: "Selected Audience",
      noHistory: "No history yet",
      templatesTitle: "Templates",
      addTemplate: "Add Template",
      historySubtitle: "Track previous WhatsApp broadcasts",
      status: {
        completed: "Completed",
        inProgress: "In Progress",
        failed: "Failed",
        active: "Active",
      },
      compose: {
        title: "Compose WhatsApp Message",
        subtitle: "Create and send personalized messages to your customers",
        senderAccount: "Sender Account",
        selectAccount: "Select account",
        accountMain: "Main Number",
        accountSupport: "Support Number",
        targetCustomers: "Target Customers",
        selectSegment: "Select segment",
        segmentAll: "All Active Subscribers",
        segmentExpiring: "Expiring Soon (3 days)",
        segmentInactive: "Inactive (3+ days)",
        segmentTwoMeals: "2 Meals/Day Plan",
        segmentThreeMeals: "3 Meals/Day Plan",
        segmentCount: "{count} customers",
        messageTemplate: "Message Template",
        selectTemplate: "Select template",
        templatePromo: "Promotion - New Menu Items",
        templateRenewal: "Subscription Renewal Reminder",
        templateFeedback: "Feedback Request",
        templateCustom: "Custom Message",
        deliverySchedule: "Delivery Schedule",
        selectSchedule: "Select schedule",
        scheduleNow: "Send Now",
        scheduleLater: "Schedule for Later",
        scheduleMorning: "Next Morning (8 AM)",
        scheduleEvening: "Evening (6 PM)",
        personalization: "Personalization",
        messageContent: "Message Content",
        verifiedLabel: "Verified by WhatsApp",
        templatePreview: "We just added new meals to your subscribed plan. Check today's menu and let us know what you think!",
        previewLink: "Preview link:",
        attachments: "Attachments",
        addImage: "Add Image",
        addDocument: "Add Document",
        addLink: "Add Link",
        customMessage: "Custom Message",
        previewFallback: "Your message will appear here...",
      },
    },
    reportsPage: {
      title: "Finance Reports",
      subtitle: "Export subscription revenue and customer summaries for finance.",
      exportCsv: "Export CSV",
      revenueSummary: "Revenue Summary",
      totalRevenue: "Total revenue (all records)",
      avgTicket: "Average ticket",
      activeCount: "Active subscriptions",
      cancelledCount: "Cancelled subscriptions",
      customerSubscriptions: "Customer Subscriptions",
      loading: "Loading...",
      error: "Unable to load finance data",
      noRecords: "No subscription records.",
      payment: "Payment",
      method: "Method",
      exportNote: "Export includes all columns shown above.",
    },
    settingsPage: {
      title: "Settings",
      subtitle: "Configure your store and system preferences",
      tabs: {
        store: "Store",
        subscriptions: "Plans & Rules",
        notifications: "Notifications",
        whatsapp: "WhatsApp",
        team: "Team",
      },
      storeInfoTitle: "Store Information",
      storeInfoDesc: "Basic information about your meal store",
      storeName: "Store Name",
      storeNameAr: "Store Name (Arabic)",
      phone: "Contact Phone",
      email: "Contact Email",
      operatingHours: "Operating Hours",
      pickupStart: "Pickup Start Time",
      pickupEnd: "Pickup End Time",
      saveChanges: "Save Changes",
      subscriptionRules: "Subscription Rules",
      subscriptionRulesDesc: "Configure how subscriptions and backup days work",
      allowBackup: "Allow Backup Days",
      maxBackup: "Max Backup Days",
      backupGrace: "Backup Days Grace Period",
      allowPause: "Allow Subscription Pause",
      maxPause: "Max Pause Days",
      staffEdit: "Staff Edit Window (Days)",
      partialPickup: "Partial Pickup Allowed",
      saveRules: "Save Rules",
      notificationTitle: "Notification Settings",
      notificationDesc: "Configure automated reminders and alerts",
      expiryFirst: "Expiry Reminder - First",
      expirySecond: "Expiry Reminder - Second",
      inactivity: "Inactivity Reminder",
      whatsappTitle: "WhatsApp Integration",
      whatsappDesc: "Configure WhatsApp Business API connection",
      whatsappSetupWarning: "WhatsApp Business API requires setup",
      whatsappSetupText: "Connect your WhatsApp Business account to enable messaging",
      whatsappPhone: "WhatsApp Business Phone",
      whatsappToken: "API Access Token",
      messageSettings: "Message Settings",
      includeArabic: "Include Arabic Text",
      autoSendMenu: "Daily Menu Auto-Send",
      saveConfig: "Save Configuration",
      teamTitle: "Team Members",
      teamDesc: "Manage staff access and permissions",
      invite: "Invite Team Member",
    },
    notFound: {
      title: "404",
      message: "Oops! Page not found",
      backHome: "Return to Home",
    },
  },
  ar: {
    common: {
      buttons: {
        save: "حفظ",
        cancel: "إلغاء",
        create: "إنشاء",
        update: "تحديث",
        delete: "حذف",
        send: "إرسال",
      },
      status: {
        present: "حاضر",
        absent: "غائب",
        paused: "موقوف",
        active: "نشط",
        expiring: "ينتهي قريباً",
        expired: "منتهي",
        inactive: "غير نشط",
      },
    },
    nav: {
      dashboard: "لوحة التحكم",
      dailyMenu: "قائمة اليوم",
      checkIn: "تسجيل الحضور",
      customers: "العملاء",
      subscriptions: "الاشتراكات",
      messages: "الرسائل",
      reports: "التقارير",
      settings: "الإعدادات",
      logout: "تسجيل الخروج",
      userFallback: "مستخدم",
      roleFallback: "الدور",
    },
    topbar: {
      searchPlaceholder: "ابحث عن العملاء أو الطلبات...",
      quickCheckIn: "تسجيل سريع",
      arabicLabel: "العربية",
      englishLabel: "الإنجليزية",
    },
    dashboard: {
      title: "لوحة التحكم",
      subtitle: "مرحباً بعودتك! هذا ما يحدث اليوم.",
      statsActiveTitle: "الاشتراكات النشطة",
      statsActiveSubtitle: "{count} على وشك الانتهاء",
      statsCheckinsTitle: "تسجيلات اليوم",
      statsCheckinsSubtitleLoading: "جارٍ التحميل...",
      statsCheckinsSubtitleMeals: "{count} وجبة مُقدمة",
      statsExpiringTitle: "على وشك الانتهاء",
      statsExpiringSubtitle: "خلال 3 أيام",
      statsPickupTitle: "معدل الاستلام",
      statsPickupSubtitle: "اليوم",
      lastUpdatedNone: "لم يتم تحديد قائمة اليوم",
      lastUpdatedRecent: "تم التحديث للتو",
      activityTitle: "قام {name} بالاستلام",
      activityDescription: "{count} وجبة • {status}",
      alertTitle: "خطة {name} ستنتهي قريباً",
      alertDescription: "يتبقى {days} يوم على {plan}",
      alertActionRenew: "تجديد",
      unknownCustomer: "عميل",
    },
    quickActions: {
      title: "إجراءات سريعة",
      checkinName: "تسجيل حضور عميل",
      checkinDesc: "تسجيل استلام الوجبة",
      menuName: "قائمة اليوم",
      menuDesc: "إنشاء ونشر القائمة",
      messageName: "إرسال رسالة",
      messageDesc: "إرسال واتساب جماعي",
      newCustomerName: "عميل جديد",
      newCustomerDesc: "تسجيل عميل",
      newSubName: "اشتراك جديد",
      newSubDesc: "إنشاء اشتراك",
      reportName: "تقرير يومي",
      reportDesc: "عرض ملخص اليوم",
    },
    todayMenu: {
      title: "قائمة اليوم",
      editMenu: "تعديل القائمة",
      loading: "جارٍ تحميل القائمة...",
      empty: "لا توجد أصناف لليوم.",
      readyCount: "جاهز لـ {count} مشترك",
      readyCountOne: "جاهز لمشترك واحد",
      readyCountChecking: "جارٍ التحقق من المشتركين...",
      sendToCustomers: "إرسال إلى العملاء",
    },
    recentActivity: {
      title: "النشاط الأخير",
      loading: "جارٍ تحميل النشاط...",
      empty: "لا يوجد نشاط اليوم.",
    },
    alerts: {
      title: "تنبيه",
      loading: "جارٍ التحقق من التنبيهات...",
      empty: "لا توجد تنبيهات حالياً.",
    },
    login: {
      appName: "Nourish Hub",
      subtitle: "سجّل الدخول للوصول للوحة التحكم",
      username: "اسم المستخدم",
      password: "كلمة المرور",
      usernamePlaceholder: "أدخل اسم المستخدم",
      passwordPlaceholder: "أدخل كلمة المرور",
      signIn: "تسجيل الدخول",
      signingIn: "جارٍ تسجيل الدخول...",
      demoCredentials: "بيانات تجريبية:",
      adminCred: "مدير: admin / admin123",
      staffCred: "موظف: staff / staff123",
      invalid: "اسم المستخدم أو كلمة المرور غير صحيحة",
      failed: "فشل تسجيل الدخول. حاول مرة أخرى.",
      welcomeAdmin: "مرحباً بعودتك يا مدير!",
      welcomeStaff: "مرحباً بعودتك!",
    },
    subscriptionsAssign: {
      pageTitle: "تعيين اشتراك",
      pageSubtitle: "اختر خطة ثم أرفق بيانات العميل وتاريخ البداية.",
      createPlan: "إنشاء خطة",
      loading: "جارٍ تحميل الاشتراكات...",
      planMeta: "{days} يوم • {meals} وجبة/اليوم",
      planInactive: "الخطة غير مفعلة",
      planSelected: "تم الاختيار",
      customerSectionTitle: "العميل والمرفقات",
      findCustomer: "ابحث عن عميل",
      searchPlaceholder: "البحث بالاسم أو الهاتف",
      noCustomers: "لا يوجد عملاء",
      startDate: "تاريخ البداية",
      paymentAmount: "مبلغ الدفع",
      paymentAmountPlaceholder: "يُستخدم سعر الخطة كافتراضي",
      paymentMethod: "طريقة الدفع",
      paymentDetails: "التفاصيل (اختياري)",
      paymentDetailsPlaceholder: "ملاحظات، رقم عقد، إلخ",
      receiptLabel: "إرفاق صورة إيصال/عقد",
      summaryPlanSelected: "تم اختيار الخطة",
      summaryPlanMissing: "اختر خطة",
      summaryCustomerSelected: "تم اختيار العميل",
      summaryCustomerMissing: "اختر عميلاً",
      assignButton: "تعيين الاشتراك",
      assigningButton: "جارٍ التعيين...",
      dialogTitle: "إنشاء خطة اشتراك",
      dialogDescription: "يمكن للمسؤولين إضافة خطط جديدة للتعيين.",
      nameLabel: "الاسم *",
      descriptionLabel: "الوصف",
      priceLabel: "السعر *",
      durationLabel: "المدة (أيام) *",
      mealsPerDayLabel: "الوجبات/اليوم",
      featuresLabel: "المميزات (اختياري)",
      dialogCancel: "إلغاء",
      dialogSubmit: "إنشاء الخطة",
      dialogSubmitting: "جارٍ الإنشاء...",
    },
    menuPage: {
      title: "قائمة اليوم",
      sendToCustomers: "إرسال إلى العملاء",
      schedule: "جدولة",
      templateLabel: "القالب",
      chooseTemplate: "اختر قالباً",
      apply: "تطبيق",
      clear: "مسح",
      saveAsTemplate: "حفظ كقالب",
      saveTemplateTitle: "حفظ القائمة الحالية",
      saveTemplateDesc: "أنشئ قالباً قابلاً لإعادة الاستخدام من عناصر قائمة اليوم.",
      templateName: "اسم القالب",
      templateNotes: "ملاحظات (اختياري)",
      lastUsed: "آخر استخدام {date}",
      itemsCount: "{count} عنصر",
      loading: "جارٍ تحميل القائمة...",
      empty: "لا توجد أصناف لليوم.",
      addMealsHint: "أضف أصنافاً من الكتالوج أو طبق قالباً",
      addCustomItem: "إضافة صنف",
      searchPlaceholder: "ابحث بالاسم أو الاسم العربي",
      categoryAll: "الكل",
      readyFor: "جاهز لـ {count} عنصر",
      catalogTitle: "كتالوج الطعام",
      createItem: "إنشاء صنف",
      nameEn: "الاسم (إنجليزي)",
      nameAr: "الاسم (عربي)",
      calories: "سعرات حرارية",
      protein: "بروتين",
      category: "الفئة",
      addToCatalog: "أضف إلى الكتالوج",
      noItems: "لا يوجد أصناف",
      applyTemplateHint: "طبق قالباً ثم عدل العناصر دون التأثير على القالب المحفوظ.",
      wideView: "عرض واسع",
      optimizedFor: "محسن لـ 30-40 طبقاً",
      totalCalories: "سعرات إجمالية",
    },
    customersPage: {
      title: "العملاء",
      subtitle: "إدارة قاعدة بيانات العملاء",
      addCustomer: "إضافة عميل",
      statsTotal: "إجمالي العملاء",
      statsActive: "نشط",
      statsExpiring: "ينتهي قريباً",
      statsExpired: "منتهي",
      searchPlaceholder: "ابحث بالاسم أو البريد أو الهاتف...",
      filtersAll: "الكل",
      tableCustomer: "العميل",
      tableContact: "التواصل",
      tablePlan: "الخطة",
      tableDaysLeft: "الأيام المتبقية",
      tablePickups: "الاستلامات",
      tableStatus: "الحالة",
      actionEdit: "تعديل",
      actionSubscribe: "اشتراك",
      actionMessage: "إرسال رسالة",
      actionDelete: "حذف",
      noCustomers: "لا يوجد عملاء",
      loadingCustomers: "جارٍ تحميل العملاء...",
      createTitle: "إضافة عميل جديد",
      createDesc: "أنشئ ملف عميل جديد. يمكنه الاشتراك في الخطط لاحقاً.",
      editTitle: "تعديل العميل",
      editDesc: "تحديث بيانات العميل.",
      subscribeTitle: "اشتراك عميل",
      subscribeDesc: "تعيين خطة اشتراك لـ {name}",
      nameLabel: "الاسم *",
      emailLabel: "البريد الإلكتروني *",
      phoneLabel: "الهاتف",
      addressLabel: "العنوان",
      planLabel: "الخطة *",
      paymentMethod: "طريقة الدفع",
      paymentAmount: "مبلغ الدفع",
      paymentDetails: "تفاصيل الدفع",
      receiptImage: "رابط صورة الإيصال",
      createButton: "إنشاء العميل",
      updateButton: "تحديث العميل",
      subscribeButton: "اشتراك العميل",
      cancel: "إلغاء",
    },
    checkinPage: {
      title: "تسجيل حضور العملاء",
      subtitle: "سجل استلام الوجبات بسرعة وكفاءة",
      searchPlaceholder: "ابحث بالاسم أو الهاتف أو امسح QR...",
      scan: "مسح",
      activeCustomers: "العملاء النشطون ({count})",
      noCustomers: "لا يوجد عملاء",
      noCustomerSelected: "لم يتم اختيار عميل",
      searchOrScan: "ابحث أو امسح لاختيار عميل",
      checkin: "تسجيل حضور",
      mealsToPick: "الوجبات المستلمة",
      ofAllowed: "من {count} المسموح",
      expiringWarning: "الاشتراك سينتهي",
      daysRemaining: "يتبقى {days} يوم",
      confirmCheckin: "تأكيد التسجيل",
      todaysCheckins: "تسجيلات اليوم ({count})",
      noCheckins: "لا توجد تسجيلات اليوم",
      calendarTitle: "تسجيلات {name}",
      calendarHint: "اضغط على اليوم لتغيير الحالة؛ الحفظ تلقائي.",
      calendarLegendSaving: "تم الحفظ",
      calendarLegendSavingNow: "جارٍ الحفظ...",
      calendarWeekday: ["الاثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت","الأحد"],
      calendarStatus: {
        present: "حاضر",
        absent: "غائب",
        paused: "موقوف",
      },
      calendarMeals: "وجبات",
      editDialogTitle: "تعديل التسجيل",
      mealsPicked: "عدد الوجبات",
      attendanceStatus: "حالة الحضور",
      notes: "ملاحظات",
      updateCheckin: "تحديث التسجيل",
    },
    messagesPage: {
      title: "رسائل واتساب",
      subtitle: "إرسال رسائل جماعية وإدارة الحملات",
      tabCompose: "إنشاء",
      tabHistory: "السجل",
      tabTemplates: "القوالب",
      newBroadcast: "بث جديد",
      targetAudience: "الجمهور المستهدف",
      messageTemplate: "قالب الرسالة",
      customPlaceholder: "اختر قالباً أو اكتب رسالة",
      messageContent: "محتوى الرسالة",
      variablesHint: "المتغيرات المتاحة: {{name}}, {{days_remaining}}, {{plan}}, {{menu}}",
      preview: "معاينة",
      sendToCount: "إرسال إلى {count} عميل",
      messagePreview: "معاينة الرسالة",
      selectedAudience: "الجمهور المحدد",
      noHistory: "لا يوجد سجل بعد",
      templatesTitle: "القوالب",
      addTemplate: "إضافة قالب",
      historySubtitle: "تتبع حملات واتساب السابقة",
      status: {
        completed: "مكتمل",
        inProgress: "جارٍ الإرسال",
        failed: "فشل",
        active: "نشط",
      },
      compose: {
        title: "إنشاء رسالة واتساب",
        subtitle: "أنشئ رسائل مخصصة وأرسلها لعملائك",
        senderAccount: "حساب الإرسال",
        selectAccount: "اختر الحساب",
        accountMain: "الرقم الرئيسي",
        accountSupport: "رقم الدعم",
        targetCustomers: "العملاء المستهدفون",
        selectSegment: "اختر الشريحة",
        segmentAll: "كل المشتركين النشطين",
        segmentExpiring: "ينتهي قريباً (3 أيام)",
        segmentInactive: "غير نشط (أكثر من 3 أيام)",
        segmentTwoMeals: "خطة وجبتين يومياً",
        segmentThreeMeals: "خطة 3 وجبات يومياً",
        segmentCount: "{count} عميل",
        messageTemplate: "قالب الرسالة",
        selectTemplate: "اختر القالب",
        templatePromo: "ترويج - أصناف جديدة",
        templateRenewal: "تذكير بتجديد الاشتراك",
        templateFeedback: "طلب تقييم",
        templateCustom: "رسالة مخصصة",
        deliverySchedule: "جدولة الإرسال",
        selectSchedule: "اختر الوقت",
        scheduleNow: "إرسال الآن",
        scheduleLater: "جدولة لوقت لاحق",
        scheduleMorning: "صباح الغد (8 ص)",
        scheduleEvening: "المساء (6 م)",
        personalization: "تخصيص",
        messageContent: "محتوى الرسالة",
        verifiedLabel: "موثق من واتساب",
        templatePreview: "أضفنا وجبات جديدة في خطتك. اطلع على قائمة اليوم وأخبرنا برأيك!",
        previewLink: "رابط المعاينة:",
        attachments: "مرفقات",
        addImage: "إضافة صورة",
        addDocument: "إضافة مستند",
        addLink: "إضافة رابط",
        customMessage: "رسالة مخصصة",
        previewFallback: "ستظهر رسالتك هنا...",
      },
    },
    reportsPage: {
      title: "تقارير المالية",
      subtitle: "تصدير إيرادات الاشتراكات وملخصات العملاء للمالية.",
      exportCsv: "تصدير CSV",
      revenueSummary: "ملخص الإيرادات",
      totalRevenue: "إجمالي الإيرادات (كل السجلات)",
      avgTicket: "متوسط التذكرة",
      activeCount: "الاشتراكات النشطة",
      cancelledCount: "الاشتراكات الملغاة",
      customerSubscriptions: "اشتراكات العملاء",
      loading: "جارٍ التحميل...",
      error: "تعذر تحميل بيانات المالية",
      noRecords: "لا توجد سجلات اشتراك.",
      payment: "الدفع",
      method: "الطريقة",
      exportNote: "التصدير يشمل كل الأعمدة أعلاه.",
    },
    settingsPage: {
      title: "الإعدادات",
      subtitle: "إعداد متجرك وتفضيلات النظام",
      tabs: {
        store: "المتجر",
        subscriptions: "الخطط والقواعد",
        notifications: "الإشعارات",
        whatsapp: "واتساب",
        team: "الفريق",
      },
      storeInfoTitle: "بيانات المتجر",
      storeInfoDesc: "معلومات أساسية عن مطبخك",
      storeName: "اسم المتجر",
      storeNameAr: "اسم المتجر (عربي)",
      phone: "هاتف التواصل",
      email: "بريد التواصل",
      operatingHours: "ساعات العمل",
      pickupStart: "بداية الاستلام",
      pickupEnd: "نهاية الاستلام",
      saveChanges: "حفظ التغييرات",
      subscriptionRules: "قواعد الاشتراك",
      subscriptionRulesDesc: "اضبط كيفية عمل الاشتراكات والأيام الاحتياطية",
      allowBackup: "السماح بالأيام الاحتياطية",
      maxBackup: "الحد الأقصى للأيام الاحتياطية",
      backupGrace: "مهلة استخدام الأيام الاحتياطية",
      allowPause: "السماح بإيقاف الاشتراك",
      maxPause: "الحد الأقصى لأيام الإيقاف",
      staffEdit: "مدة تعديل الموظفين (أيام)",
      partialPickup: "السماح باستلام جزئي",
      saveRules: "حفظ القواعد",
      notificationTitle: "إعدادات الإشعارات",
      notificationDesc: "إعداد التذكيرات والتنبيهات التلقائية",
      expiryFirst: "تذكير انتهاء - أول",
      expirySecond: "تذكير انتهاء - ثانٍ",
      inactivity: "تذكير عدم النشاط",
      whatsappTitle: "تكامل واتساب",
      whatsappDesc: "إعداد اتصال WhatsApp Business API",
      whatsappSetupWarning: "يجب إعداد WhatsApp Business API",
      whatsappSetupText: "اتصل بحساب واتساب التجاري لتفعيل الرسائل",
      whatsappPhone: "هاتف واتساب التجاري",
      whatsappToken: "رمز الدخول API",
      messageSettings: "إعدادات الرسائل",
      includeArabic: "إرسال نص عربي",
      autoSendMenu: "إرسال القائمة تلقائياً",
      saveConfig: "حفظ الإعداد",
      teamTitle: "أعضاء الفريق",
      teamDesc: "إدارة صلاحيات الفريق",
      invite: "دعوة عضو فريق",
    },
    notFound: {
      title: "404",
      message: "عذراً، الصفحة غير موجودة",
      backHome: "العودة للرئيسية",
    },
  },
};

function getNestedTranslation(record: TranslationRecord, key: string): string | undefined {
  return key.split(".").reduce<TranslationValue | undefined>((acc, part) => {
    if (acc && typeof acc === "object") {
      return (acc as TranslationRecord)[part];
    }
    return acc as string | undefined;
  }, record) as string | undefined;
}

function format(template: string, vars?: Record<string, string | number>): string {
  if (!vars) return template;
  return template.replace(/\{(.*?)\}/g, (match, token) => {
    const value = vars[token];
    return value === undefined ? match : String(value);
  });
}

export function translate(locale: SupportedLocale, key: string, vars?: Record<string, string | number>): string {
  const fromLocale = getNestedTranslation(translations[locale], key);
  const fallback = getNestedTranslation(translations.en, key);
  const template = fromLocale || fallback || key;
  return format(template, vars);
}
